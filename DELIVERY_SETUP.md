# üöö –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–∏—Å—Ç–µ–º—ã –¥–æ—Å—Ç–∞–≤–∫–∏ YouBaBa

## üìã –ß—Ç–æ –±—ã–ª–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### Backend (Express + TypeScript)
- ‚úÖ API –¥–ª—è —Ä–∞—Å—á—ë—Ç–∞ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –¥–æ—Å—Ç–∞–≤–∫–∏
- ‚úÖ API –¥–ª—è –ø–æ–¥—Å–∫–∞–∑–æ–∫ –∞–¥—Ä–µ—Å–æ–≤ (–∞–≤—Ç–æ–∫–æ–º–ø–ª–∏—Ç)
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Yandex Maps Geocoder API
- ‚úÖ –†–∞—Å—á—ë—Ç —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è –ø–æ —Ñ–æ—Ä–º—É–ª–µ Haversine
- ‚úÖ CORS –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞

### Frontend (React + TypeScript)
- ‚úÖ –ü–æ–ª–µ –≤–≤–æ–¥–∞ –∞–¥—Ä–µ—Å–∞ —Å –∞–≤—Ç–æ–∫–æ–º–ø–ª–∏—Ç–æ–º
- ‚úÖ –ü–æ–¥—Å–∫–∞–∑–∫–∏ –ø—Ä–∏ –≤–≤–æ–¥–µ (debounce 500–º—Å)
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –∏ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è –¥–æ—Å—Ç–∞–≤–∫–∏
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∞–¥—Ä–µ—Å–∞ –≤ localStorage
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±—ç–∫–µ–Ω–¥–æ–º

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ü–æ–ª—É—á–∏—Ç–µ API –∫–ª—é—á Yandex Maps

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ https://developer.tech.yandex.ru/keys/
2. –í–æ–π–¥–∏—Ç–µ –∏–ª–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å
3. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –∫–ª—é—á:
   - –í—ã–±–µ—Ä–∏—Ç–µ **"JavaScript API –∏ HTTP Geocoder"**
   - –£–∫–∞–∂–∏—Ç–µ –¥–æ–º–µ–Ω—ã (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –ø—É—Å—Ç—ã–º)
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –∫–ª—é—á

### 2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Backend

```bash
cd server

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm install

# –°–æ–∑–¥–∞–π—Ç–µ .env —Ñ–∞–π–ª –∏ –≤—Å—Ç–∞–≤—å—Ç–µ API –∫–ª—é—á
nano .env
```

–°–æ–¥–µ—Ä–∂–∏–º–æ–µ `.env`:
```env
YANDEX_MAPS_API_KEY=–≤–∞—à_api_–∫–ª—é—á_–∑–¥–µ—Å—å
PORT=3001
RESTAURANT_LAT=47.225970
RESTAURANT_LNG=39.686114
```

### 3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ Backend

```bash
# –í —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (—Å hot-reload)
npm run dev

# –ò–ª–∏ –¥–ª—è production
npm run build
npm start
```

–í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
```
üöÄ –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 3001
üìç –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞: 47.22597, 39.686114
üó∫Ô∏è  Yandex Maps API: ‚úì –Ω–∞—Å—Ç—Ä–æ–µ–Ω
```

### 4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Backend

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–µ—Ä–≤–µ—Ä–∞
curl http://localhost:3001/health

# –¢–µ—Å—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞
curl http://localhost:3001/api/delivery/restaurant

# –¢–µ—Å—Ç –ø–æ–¥—Å–∫–∞–∑–æ–∫
curl "http://localhost:3001/api/delivery/suggestions?q=–û—Ä–±–∏—Ç–∞–ª—å–Ω–∞—è"

# –¢–µ—Å—Ç —Ä–∞—Å—á—ë—Ç–∞ –¥–æ—Å—Ç–∞–≤–∫–∏
curl -X POST http://localhost:3001/api/delivery/calculate \
  -H "Content-Type: application/json" \
  -d '{"address":"–û—Ä–±–∏—Ç–∞–ª—å–Ω–∞—è 15"}'
```

### 5. –ó–∞–ø—É—Å—Ç–∏—Ç–µ Frontend

```bash
cd ..  # –í–µ—Ä–Ω–∏—Ç–µ—Å—å –≤ –∫–æ—Ä–µ–Ω—å YouBaBa

# –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ .env –Ω–∞—Å—Ç—Ä–æ–µ–Ω
cat .env
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: VITE_API_URL=http://localhost:3001/api

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ dev-—Å–µ—Ä–≤–µ—Ä
npm run dev
```

### 6. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ

1. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:5173
2. –ù–∞–π–¥–∏—Ç–µ –ø–æ–ª–µ "–í–≤–µ–¥–∏—Ç–µ –∞–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏" –≤ —à–∞–ø–∫–µ
3. –ù–∞—á–Ω–∏—Ç–µ –≤–≤–æ–¥–∏—Ç—å –∞–¥—Ä–µ—Å (–Ω–∞–ø—Ä–∏–º–µ—Ä: "–û—Ä–±–∏—Ç–∞–ª—å–Ω–∞—è")
4. –î–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –ø–æ–¥—Å–∫–∞–∑–∫–∏
5. –í—ã–±–µ—Ä–∏—Ç–µ –∞–¥—Ä–µ—Å –∏–∑ —Å–ø–∏—Å–∫–∞
6. –ü–æ–¥ –ø–æ–ª–µ–º –ø–æ—è–≤–∏—Ç—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –¥–æ—Å—Ç–∞–≤–∫–µ

## üìä –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç "–û—Ä–±–∏—Ç"
         ‚Üì
Frontend –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å —Å debounce 500–º—Å
         ‚Üì
Backend ‚Üí Yandex Geocoder API
         ‚Üì
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–¥—Å–∫–∞–∑–∫–∏ –∞–¥—Ä–µ—Å–æ–≤
         ‚Üì
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç –∞–¥—Ä–µ—Å
         ‚Üì
Frontend ‚Üí Backend —Ä–∞—Å—á—ë—Ç –¥–æ—Å—Ç–∞–≤–∫–∏
         ‚Üì
Backend —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –∏ —Å—Ç–æ–∏–º–æ—Å—Ç—å
         ‚Üì
–û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç + —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ localStorage
```

## üí∞ –õ–æ–≥–∏–∫–∞ —Ä–∞—Å—á—ë—Ç–∞ —Å—Ç–æ–∏–º–æ—Å—Ç–∏

```typescript
if (—Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ <= 2 –∫–º) {
  —Å—Ç–æ–∏–º–æ—Å—Ç—å = 0 ‚ÇΩ (–±–µ—Å–ø–ª–∞—Ç–Ω–æ)
} else {
  —Å—Ç–æ–∏–º–æ—Å—Ç—å = 100 ‚ÇΩ + (—Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ √ó 25 ‚ÇΩ)
  –Ω–æ –Ω–µ –±–æ–ª–µ–µ 500 ‚ÇΩ
}
```

**–ü—Ä–∏–º–µ—Ä—ã:**
- 1 –∫–º ‚Üí **0 ‚ÇΩ** (–±–µ—Å–ø–ª–∞—Ç–Ω–æ)
- 3 –∫–º ‚Üí **175 ‚ÇΩ**
- 10 –∫–º ‚Üí **350 ‚ÇΩ**
- 20 –∫–º ‚Üí **500 ‚ÇΩ** (–º–∞–∫—Å–∏–º—É–º)

## üîß Troubleshooting

### Backend –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –ø–æ—Ä—Ç 3001 —Å–≤–æ–±–æ–¥–µ–Ω: `lsof -i :3001`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ .env —Ñ–∞–π–ª: `cat server/.env`

### –ü–æ–¥—Å–∫–∞–∑–∫–∏ –Ω–µ –ø–æ—è–≤–ª—è—é—Ç—Å—è
- –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ backend –∑–∞–ø—É—â–µ–Ω: `curl http://localhost:3001/health`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ CORS: Backend –¥–æ–ª–∂–µ–Ω —Ä–∞–∑—Ä–µ—à–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã —Å localhost:5173

### –û—à–∏–±–∫–∞ "–ê–¥—Ä–µ—Å –Ω–µ –Ω–∞–π–¥–µ–Ω"
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ API –∫–ª—é—á Yandex Maps
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –∫–ª—é—á –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω –¥–ª—è HTTP Geocoder
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–∏–º–∏—Ç—ã: https://developer.tech.yandex.ru/services/

### Frontend –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ Backend
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `.env` –≤ –∫–æ—Ä–Ω–µ YouBaBa
- –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: `VITE_API_URL=http://localhost:3001/api`
- –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ dev-—Å–µ—Ä–≤–µ—Ä –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è .env

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
YouBaBa/
‚îú‚îÄ‚îÄ server/                          # Backend
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.ts                # –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª —Å–µ—Ä–≤–µ—Ä–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ routes/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ delivery.ts         # API —Ä–æ—É—Ç—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ services/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ geocoder.ts         # Yandex Maps –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ .env                        # API –∫–ª—é—á (—Å–æ–∑–¥–∞–π—Ç–µ!)
‚îÇ   ‚îî‚îÄ‚îÄ package.json
‚îÇ
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ deliveryService.ts      # –ö–ª–∏–µ–Ω—Ç –¥–ª—è Backend API
‚îÇ   ‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Header.tsx              # –ü–æ–ª–µ –≤–≤–æ–¥–∞ –∞–¥—Ä–µ—Å–∞
‚îÇ   ‚îî‚îÄ‚îÄ store/
‚îÇ       ‚îî‚îÄ‚îÄ deliveryStore.ts        # Zustand store
‚îÇ
‚îî‚îÄ‚îÄ .env                            # VITE_API_URL (—Å–æ–∑–¥–∞–Ω)
```

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

- [ ] –î–æ–±–∞–≤—å—Ç–µ API –∫–ª—é—á –≤ production .env
- [ ] –ù–∞—Å—Ç—Ä–æ–π—Ç–µ CORS –¥–ª—è production –¥–æ–º–µ–Ω–∞
- [ ] –î–æ–±–∞–≤—å—Ç–µ rate limiting –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç –∑–ª–æ—É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–π
- [ ] –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (–ª–æ–≥–∏, –º–µ—Ç—Ä–∏–∫–∏)
- [ ] –î–æ–±–∞–≤—å—Ç–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∞—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [Yandex Maps API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://yandex.ru/dev/maps/)
- [Geocoder API](https://yandex.ru/dev/maps/geocoder/)
- [Express.js](https://expressjs.com/)
- [TypeScript](https://www.typescriptlang.org/)
